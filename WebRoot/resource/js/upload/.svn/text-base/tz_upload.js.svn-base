eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('l 8;c(8==u){8=9(7){6.3F(7)}}8.b.3F=9(7){1X{6.2q={};6.7=7;6.1o=[];6.w="3L"+8.3B++;6.q=r;8.1x[6.w]=6;6.3d();6.30();6.2M()}1I(12){K 8.1x[6.w];H 12}};8.1x={};8.3B=0;8.2Q="2.2.0 4b 2";8.4d={46:-39,45:-38,3W:-3t,3V:-43};8.42={41:-44,40:-3Z,3Y:-4f,3H:-3N,3O:-3K,3Q:-3P,4O:-4N,4I:-4K,4h:-51,53:-4Z};8.4Y={4U:-1,4W:-2,4X:-3,4G:-4,4F:-5};8.3y={4q:-39,3x:-38,4r:-3t};8.3w={3u:-1,4s:-2};8.3v={3A:"1L",4n:"4j",4i:"4k"};8.b.3d=9(){6.d=9(22,3c){6.7[22]=(6.7[22]==u)?3c:6.7[22]};6.d("1a","");6.d("1z","4l");6.d("M",{});6.d("17",R);6.d("1q",R);6.d("1j",[]);6.d("1g","*.*");6.d("1e","4m 4t");6.d("1b",0);6.d("1u",0);6.d("1w",0);6.d("U","33.4u");6.d("20",27);6.d("1p","");6.d("14",1);6.d("13",1);6.d("1k","");6.d("15","4B: #4D; 4A-4z: 4v;");6.d("1i",0);6.d("1h",0);6.d("1m",8.3y.3x);6.d("18",R);6.d("1s",r);6.d("29",8.3w.3u);6.d("2G",8.3v.3A);6.d("S",R);6.7.2b=6.7.S;6.7.3r=6.3n;6.d("1K",r);6.d("1N",r);6.d("1C",r);6.d("1A",r);6.d("3o",r);6.d("V",r);6.d("26",r);6.d("1Y",r);6.d("1Q",r);6.d("1U",r);6.d("1W",6.3i);6.d("25",{});6.2q=6.7.25;c(6.7.20){6.7.U=6.7.U+"?4w="+3C.4x(3C.4S()*4y)}K 6.d};8.b.30=9(){c(6.7.1s!==""){6.2S()}D{6.2Z()}};8.b.2Z=9(){l N,C;c(G.1v(6.w)!==r){H"2U "+6.w+" 28 2F 1r 2T. 2Y 2u 2R 2H 10 2g 2P"}N=G.3h("2n")[0];c(N==u){H"2o 10 2t 2N \'2n\' 2s."}C=G.1Z("34");C.L.Q="2V";C.L.P="2V";C.L.3E="4E";N.2p(C);C.2O=6.2D()};8.b.2S=9(){l N,1D;c(G.1v(6.w)!==r){H"2U "+6.w+" 28 2F 1r 2T. 2Y 2u 2R 2H 10 2g 2P"}N=G.1v(6.7.1s);c(N==u){H"2o 10 2t 2N 4o 2s."}1D=G.1Z("34");1D.2O=6.2D();N.T.4p(1D.4V,N)};8.b.2D=9(){A[\'<1n 37="\',6.w,\'" 52="50/x-4T-4L" 4J="\',6.7.U,\'" Q="\',6.7.14,\'" P="\',6.7.13,\'" 4H="33">\',\'<Y j="4M" B="\',6.7.2G,\'" />\',\'<Y j="1d" B="\',6.7.U,\'" />\',\'<Y j="4R" B="4Q" />\',\'<Y j="4P" B="R" />\',\'<Y j="54" B="3X" />\',\'<Y j="3S" B="\'+6.2W()+\'" />\',\'</1n>\'].O("")};8.b.2W=9(){l 31=6.2L();l 32=6.7.1j.O(",");A["w=",m(6.w),"&p;3J=",m(6.7.1a),"&p;1R=",m(6.7.17),"&p;1O=",m(6.7.1q),"&p;3T=",m(32),"&p;3R=",m(31),"&p;1M=",m(6.7.1z),"&p;3M=",m(6.7.1g),"&p;3I=",m(6.7.1e),"&p;1J=",m(6.7.1b),"&p;1F=",m(6.7.1u),"&p;1G=",m(6.7.1w),"&p;1P=",m(6.7.2b),"&p;11=",m(6.7.1p),"&p;4g=",m(6.7.14),"&p;4a=",m(6.7.13),"&p;3U=",m(6.7.1k),"&p;49=",m(6.7.1i),"&p;48=",m(6.7.1h),"&p;47=",m(6.7.15),"&p;21=",m(6.7.1m),"&p;4c=",m(6.7.18),"&p;4e=",m(6.7.29)].O("")};8.b.1l=9(){c(6.q==u){6.q=G.1v(6.w)}c(6.q===r){H"2o 10 2t 2u 2s"}A 6.q};8.b.2L=9(){l 19=6.7.M;l 2r=[];c(o(19)==="1n"){2k(l j 1r 19){c(19.2j(j)){2r.2h(m(j.h())+"="+m(19[j].h()))}}}A 2r.O("&p;")};8.b.4C=9(){1X{6.2l();l q=r;1X{q=6.1l()}1I(12){}c(q!=u&&q.T!=u&&o q.T.1E==="9"){l C=q.T;c(C!=u){C.1E(q);c(C.T!=u&&o C.T.1E==="9"){C.T.1E(C)}}}8.1x[6.w]=r;K 8.1x[6.w];K 6.q;K 6.7;K 6.2q;K 6.1o;K 6.w;K 1L[6.w];A 27}1I(5o){A R}};8.b.2M=9(){6.S(["---8 6s 6t---\\n","6r: ",8.2Q,"\\n","6q 6o: ",6.w,"\\n","6p:\\n","\\t","1a:               ",6.7.1a,"\\n","\\t","U:                ",6.7.U,"\\n","\\t","17:         ",6.7.17.h(),"\\n","\\t","1q:         ",6.7.1q.h(),"\\n","\\t","1j:             ",6.7.1j.O(", "),"\\n","\\t","1z:           ",6.7.1z,"\\n","\\t","M:              ",6.7.M.h(),"\\n","\\t","1g:               ",6.7.1g,"\\n","\\t","1e:   ",6.7.1e,"\\n","\\t","1b:          ",6.7.1b,"\\n","\\t","1u:        ",6.7.1u,"\\n","\\t","1w:         ",6.7.1w,"\\n","\\t","S:                    ",6.7.S.h(),"\\n","\\t","20:      ",6.7.20.h(),"\\n","\\t","1s:    ",6.7.1s.h(),"\\n","\\t","1p:         ",6.7.1p.h(),"\\n","\\t","14:             ",6.7.14.h(),"\\n","\\t","13:            ",6.7.13.h(),"\\n","\\t","1k:              ",6.7.1k.h(),"\\n","\\t","15:        ",6.7.15.h(),"\\n","\\t","1i:  ",6.7.1i.h(),"\\n","\\t","1h: ",6.7.1h.h(),"\\n","\\t","1m:            ",6.7.1m.h(),"\\n","\\t","18:          ",6.7.18.h(),"\\n","\\t","25:          ",6.7.25.h(),"\\n","3G 6u:\\n","\\t","1K I:  ",(o 6.7.1K==="9").h(),"\\n","\\t","1N I: ",(o 6.7.1N==="9").h(),"\\n","\\t","1C I:       ",(o 6.7.1C==="9").h(),"\\n","\\t","1A I:  ",(o 6.7.1A==="9").h(),"\\n","\\t","V I:      ",(o 6.7.V==="9").h(),"\\n","\\t","26 I:   ",(o 6.7.26==="9").h(),"\\n","\\t","1Y I:      ",(o 6.7.1Y==="9").h(),"\\n","\\t","1Q I:    ",(o 6.7.1Q==="9").h(),"\\n","\\t","1U I:   ",(o 6.7.1U==="9").h(),"\\n","\\t","1W I:             ",(o 6.7.1W==="9").h(),"\\n"].O(""))};8.b.6v=9(j,B,2J){c(B==u){A(6.7[j]=2J)}D{A(6.7[j]=B)}};8.b.6A=9(j){c(6.7[j]!=u){A 6.7[j]}A""};8.b.g=9(W,s){s=s||[];l q=6.1l();l z;c(o q[W]==="9"){c(s.1T===0){z=q[W]()}D c(s.1T===1){z=q[W](s[0])}D c(s.1T===2){z=q[W](s[0],s[1])}D c(s.1T===3){z=q[W](s[0],s[1],s[2])}D{H"6B 6z 6y"}c(z!=u&&o z.1y==="1n"){z=6.J(z)}A z}D{H"6w 9 j: "+W}};8.b.6x=9(){6.g("6n")};8.b.6m=9(){6.g("6c")};8.b.6d=9(F){6.g("3g",[F])};8.b.2X=9(F,1V){c(1V!==R){1V=27}6.g("6b",[F,1V])};8.b.6a=9(){6.2l();l 2w=6.2v();3e(2w.67>0){6.2X();2w=6.2v()}};8.b.2l=9(){6.g("68")};8.b.2v=9(){A 6.g("69")};8.b.6e=9(2I){6.g("6f",[2I])};8.b.6k=9(F){c(o(F)==="6l"){A 6.g("6j",[F])}D{A 6.g("6i",[F])}};8.b.6g=9(F,j,B){A 6.g("6D",[F,j,B])};8.b.6C=9(F,j){6.g("6K",[F,j])};8.b.6Y=9(2C){6.7.1a=2C.h();6.g("6X",[2C])};8.b.6W=9(2y){6.7.M=2y;6.g("2x",[2y])};8.b.70=9(j,B){6.7.M[j]=B;6.g("2x",[6.7.M])};8.b.72=9(j){K 6.7.M[j];6.g("2x",[6.7.M])};8.b.71=9(2z,2A){6.7.1g=2z;6.7.1e=2A;6.g("6Z",[2z,2A])};8.b.6U=9(1J){6.7.1b=1J;6.g("6J",[1J])};8.b.55=9(1F){6.7.1u=1F;6.g("6V",[1F])};8.b.6I=9(1G){6.7.1w=1G;6.g("6H",[1G])};8.b.6E=9(1M){6.7.1z=1M;6.g("6F",[1M])};8.b.6G=9(1R){6.7.17=1R;6.g("6L",[1R])};8.b.6M=9(1O){6.7.1q=1O;6.g("6S",[1O])};8.b.6T=9(Z){c(o Z==="2m"){Z=Z.3a(" ","").3m(",")}6.7.1j=Z;6.g("6R",[Z])};8.b.6Q=9(1P){6.7.2b=1P;6.g("6N",[1P])};8.b.6O=9(11){c(11==u){11=""}6.7.1p=11;6.g("6P",[11])};8.b.6h=9(Q,P){6.7.14=Q;6.7.13=P;l 1d=6.1l();c(1d!=u){1d.L.Q=Q+"2K";1d.L.P=P+"2K"}6.g("65",[Q,P])};8.b.5q=9(2E){6.7.1k=2E;6.g("5r",[2E])};8.b.5p=9(2c,2d){6.7.1i=2d;6.7.1h=2c;6.g("66",[2c,2d])};8.b.5m=9(2e){6.7.15=2e;6.g("5n",[2e])};8.b.5s=9(2f){6.7.18=2f;6.g("5t",[2f])};8.b.5y=9(21){6.7.1m=21;6.g("5z",[21])};8.b.5x=9(2a){6.7.29=2a;6.g("5w",[2a])};8.b.E=9(1c,s){c(s==u){s=[]}D c(!(s 5u 5v)){s=[s]}l 35=6;c(o 6.7[1c]==="9"){6.1o.2h(9(){6.7[1c].3z(6,s)});5l(9(){35.3D()},0)}D c(6.7[1c]!==r){H"3G 5k "+1c+" 28 5a 5b 28 10 a 9"}};8.b.3D=9(){l f=6.1o?6.1o.59():r;c(o(f)==="9"){f.3z(6)}};8.b.J=9(e){l 3f=/[$]([0-58-f]{4})/i;l 2B={};l X;c(e!=u){2k(l k 1r e.1y){c(e.1y.2j(k)){X=k;l 1H;3e((1H=3f.56(X))!==r){X=X.3a(1H[0],57.5c(5d("5i"+1H[1],16)))}2B[X]=e.1y[k]}}e.1y=2B}A e};8.b.5j=9(){l q=6.1l();c(o q.3g!=="9"){H"5h 5g 5e 5f 5A."}c(1L[6.w]==u){1L[6.w]=q}6.E("1K")};8.b.5B=9(){6.E("1N")};8.b.5W=9(e){e=6.J(e);6.E("1C",e)};8.b.5X=9(e,1S,v){e=6.J(e);6.E("1A",[e,1S,v])};8.b.5V=9(3p,3q){6.E("3o",[3p,3q])};8.b.5U=9(e){e=6.J(e);6.E("3r",e)};8.b.3n=9(e){l z;c(o 6.7.V==="9"){e=6.J(e);z=6.7.V.5S(6,e)}D c(6.7.V!=u){H"V 5T 2g a 9"}c(z===u){z=27}z=!!z;6.g("5Y",[z])};8.b.5Z=9(e,3l,3k){e=6.J(e);6.E("26",[e,3l,3k])};8.b.64=9(e,1S,v){e=6.J(e);6.E("1Y",[e,1S,v])};8.b.63=9(e,3j){e=6.J(e);6.E("1Q",[e,3j])};8.b.62=9(e){e=6.J(e);6.E("1U",e)};8.b.S=9(v){6.E("1W",v)};8.b.3i=9(v){c(6.7.S){l 1t,1f=[];c(o v==="1n"&&o v.j==="2m"&&o v.v==="2m"){2k(l 23 1r v){c(v.2j(23)){1f.2h(23+": "+v[23])}}1t=1f.O("\\n")||"";1f=1t.3m("\\n");1t="60: "+1f.O("\\61: ");8.24.2i(1t)}D{8.24.2i(v)}}};8.24={};8.24.2i=9(v){l y,1B;1X{y=G.1v("36");c(!y){1B=G.1Z("5R");G.3h("2n")[0].2p(1B);y=G.1Z("5Q");y.37="36";y.L.5G="5H";y.5F("3b","3s");y.3b="3s";y.L.3E="5E";y.L.Q="5C";y.L.P="5D";y.L.5I="5J";1B.2p(y)}y.B+=v+"\\n";y.5O=y.5P-y.5N}1I(12){5M("5K: "+12.j+" 5L: "+12.v)}};',62,437,'||||||this|settings|SWFUpload|function||prototype|if|ensureDefault|file||callFlash|toString||name||var|encodeURIComponent||typeof|amp|movieElement|null|argumentArray||undefined|message|movieName||console|returnValue|return|value|container|else|queueEvent|fileID|document|throw|assigned|unescapeFilePostParams|delete|style|post_params|targetElement|join|height|width|false|debug|parentNode|flash_url|upload_start_handler|functionName|uk|param|http_status_codes|not|buttonImageURL|ex|button_height|button_width|button_text_style||use_query_string|button_disabled|postParams|upload_url|file_size_limit|handlerName|movie|file_types_description|exceptionValues|file_types|button_text_left_padding|button_text_top_padding|http_success|button_text|getMovieElement|button_action|object|eventQueue|button_image_url|requeue_on_error|in|button_placeholder_id|exceptionMessage|file_upload_limit|getElementById|file_queue_limit|instances|post|file_post_name|file_queue_error_handler|documentForm|file_queued_handler|tempParent|removeChild|fileUploadLimit|fileQueueLimit|match|catch|fileSizeLimit|swfupload_loaded_handler|window|filePostName|file_dialog_start_handler|requeueOnError|debugEnabled|upload_success_handler|useQueryString|errorCode|length|upload_complete_handler|triggerErrorEvent|debug_handler|try|upload_error_handler|createElement|prevent_swf_caching|buttonAction|settingName|key|Console|custom_settings|upload_progress_handler|true|is|button_cursor|cursor|debug_enabled|left|top|css|isDisabled|be|push|writeLine|hasOwnProperty|for|stopUpload|string|body|Could|appendChild|customSettings|paramStringPairs|element|find|Flash|getStats|stats|SetPostParams|paramsObject|types|description|unescapedPost|url|getFlashHTML|html|already|button_window_mode|could|statsObject|default_value|px|buildParamString|displayDebugInfo|the|innerHTML|added|version|Object|replaceWithFlash|use|ID|1px|getFlashVars|cancelUpload|The|appendFlash|loadFlash|paramString|httpSuccessString|swfupload|div|self|SWFUpload_Console|id|110|100|replace|wrap|defaultValue|initSettings|while|reg|StartUpload|getElementsByTagName|debugMessage|serverData|bytesTotal|bytesComplete|split|returnUploadStart|file_dialog_complete_handler|numFilesSelected|numFilesQueued|return_upload_start_handler|off|120|ARROW|WINDOW_MODE|CURSOR|SELECT_FILES|BUTTON_ACTION|apply|WINDOW|movieCount|Math|executeNextEvent|overflow|initSWFUpload|Event|SECURITY_ERROR|fileTypesDescription|uploadURL|240|SWFUpload_|fileTypes|230|UPLOAD_LIMIT_EXCEEDED|250|UPLOAD_FAILED|params|flashvars|httpSuccess|buttonText|INVALID_FILETYPE|ZERO_BYTE_FILE|always|IO_ERROR|210|MISSING_UPLOAD_URL|HTTP_ERROR|UPLOAD_ERROR|130|200|FILE_EXCEEDS_SIZE_LIMIT|QUEUE_LIMIT_EXCEEDED|buttonTextStyle|buttonTextLeftPadding|buttonTextTopPadding|buttonHeight|Beta|buttonDisabled|QUEUE_ERROR|buttonCursor|220|buttonWidth|FILE_CANCELLED|OPAQUE|transparent|opaque|Filedata|All|TRANSPARENT|placeholder|replaceChild|SELECT_FILE|START_UPLOAD|HAND|Files|swf|16pt|swfuploadrnd|floor|999999999|size|font|color|destroy|000000|hidden|CANCELLED|COMPLETE|class|FILE_VALIDATION_FAILED|data|270|flash|wmode|260|SPECIFIED_FILE_ID_NOT_FOUND|menu|high|quality|random|shockwave|QUEUED|firstChild|IN_PROGRESS|ERROR|FILE_STATUS|290|application|280|type|UPLOAD_STOPPED|allowScriptAccess|setFileUploadLimit|exec|String|9a|shift|unknown|or|fromCharCode|parseInt|failed|to|methods|ExternalInterface|0x|flashReady|handler|setTimeout|setButtonTextStyle|SetButtonTextStyle|ex1|setButtonTextPadding|setButtonText|SetButtonText|setButtonDisabled|SetButtonDisabled|instanceof|Array|SetButtonCursor|setButtonCursor|setButtonAction|SetButtonAction|initialize|fileDialogStart|700px|350px|auto|setAttribute|fontFamily|monospace|margin|5px|Exception|Message|alert|clientHeight|scrollTop|scrollHeight|textarea|form|call|must|uploadStart|fileDialogComplete|fileQueued|fileQueueError|ReturnUploadStart|uploadProgress|EXCEPTION|nEXCEPTION|uploadComplete|uploadSuccess|uploadError|SetButtonDimensions|SetButtonTextPadding|files_queued|StopUpload|GetStats|cancelQueue|CancelUpload|SelectFiles|startUpload|setStats|SetStats|addFileParam|setButtonDimensions|GetFile|GetFileByIndex|getFile|number|selectFiles|SelectFile|Name|Settings|Movie|Version|Instance|Info|Handlers|addSetting|Invalid|selectFile|arguments|many|getSetting|Too|removeFileParam|AddFileParam|setFilePostName|SetFilePostName|setUseQueryString|SetFileQueueLimit|setFileQueueLimit|SetFileSizeLimit|RemoveFileParam|SetUseQueryString|setRequeueOnError|SetDebugEnabled|setButtonImageURL|SetButtonImageURL|setDebugEnabled|SetHTTPSuccess|SetRequeueOnError|setHTTPSuccess|setFileSizeLimit|SetFileUploadLimit|setPostParams|SetUploadURL|setUploadURL|SetFileTypes|addPostParam|setFileTypes|removePostParam'.split('|'),0,{}))
$.tmUpload = function(options){
	var opts = $.extend({},$.tmUpload.defaults,options);
	var settings = {
			flash_url : "js/upload/swfupload.swf",
			upload_url: opts.url,	//上传的服务器的地址
			post_params: opts.params,
			file_size_limit : opts.limitSize,//上传上传的过来
			file_types : opts.fileTypes,//格式过滤
			file_types_description :opts.fileTypesDes,
			file_upload_limit : opts.uploadLimit,  //配置上传个数
			file_queue_limit : opts.queueLimit,//代表不限制
			file_post_name : opts.postName,
			debug: false,
			// Button settings
			button_image_url: opts.btnImage,
			button_width: opts.btnWidth,
			button_height: opts.btnHeight,
			button_placeholder_id: opts.btnId,
			//button_text: '<span class="theFont">浏览</span>',
			//button_text_style: ".theFont { font-size: 16; }",
			button_text_left_padding: 12,
			button_text_top_padding: 3,
			button_action : (opts.multiple? SWFUpload.BUTTON_ACTION.SELECT_FILES : SWFUpload.BUTTON_ACTION.SELECT_FILE),
			//事件的调用
			file_queued_handler : function(file){
				tm_append_uploaditem(file);
			},
			//queue_complete_handler : queueComplete,	
			file_dialog_complete_handler : function(numFilesSelected, numFilesQueued){
				$("#aspupload").find(".bar_total").html("共"+numFilesSelected+"个文件 ，还剩余<span class='number'>"+numFilesQueued+"</span>个");
				this.startUpload();
			},
			file_queue_error_handler : fileQueueError,
			upload_start_handler : function(file){
				$("#"+file.id).find(".loading").hide();
				$("#"+file.id).find(".loaded").show();
			},
			upload_progress_handler : function(file, bytesLoaded, bytesTotal){
				var percent = Math.ceil((bytesLoaded / bytesTotal) * 100);
				$("#"+file.id).find(".up-prograss").width(percent+"%");
				$("#"+file.id).find(".filesize").text(tm_countFileSize(bytesLoaded)+" / "+tm_countFileSize(bytesTotal));
				
			},
			upload_success_handler : function(file, serverData){
				if(opts.callback)opts.callback(serverData,file);
				tm_hide_upload();
			},
			upload_complete_handler : function(file){
				$("#"+file.id).fadeOut("slow",function(){
					$(this).remove();
					var length = $("#uploaditembox").find("li").length;
					$("#aspupload").find(".bar_total").find(".number").text(length);
					 tm_hide_upload();
				});
				this.startUpload();
			},
			upload_error_handler : uploadError
		};
		upload = new SWFUpload(settings);
};



$.tmUpload.defaults = {
	url:"/yunpan/upload.jsp",//上传的路径
	limitSize:"1000 MB",/*MB*///上传文件吸纳子的大小
	params:{},//传递给服务器的参数，key-value
	fileTypes:"*.*",//过来文件选择的类型*.jpg;*.gif
	fileTypesDes:"所有文件",
	postName:"file",
	uploadLimit:100,
	queueLimit:0,
	multiple : true,//控制你选择文件是选择单个还是多个
	btnId:"tmupload",//按钮
	btnImage: "js/upload/btn_wj.jpg",//对应的上传图标
	btnWidth:100,//图标的宽度
	btnHeight:32,//图标的高度
	callback:function(serverData,file){//上传成功的回调方法
		
		
	}
};
 
 
 //附加上传框
 function tm_append_uploaditem(file){
	 var html =$("#aspupload").html();
	 if(isEmpty(html)){
    	 $("body").append("<div id='aspupload'><div class='headbar'>"+
		 "		<span class='fl bar_title'>潭州学院上传组件</span></span>"+
		 "		<span class='fr bar_total'></span>"+
		 "		<span class='fr bar_add'><a id='continue' onclick='tm_expand_close(this)' class='continue_1' href='javascript:void(0);'></a></span>"+
		 "		<a href='javascript:void(0);' id='enlarge' onclick='tm_expand_upload(this)' class='windowClick shrink'></a>"+
		 "	</div>"+
		 "	<div class='loadbar' id='mainloadarea' style='height: 345px; background: rgb(238, 238, 238);'>"+
		 "		<ul id='uploaditembox'>"+
		 "		</ul>"+
		 "	</div>"+
		 "</div>");
	 }
	 var fileName = file.name;
	 if(fileName.length>20)fileName = fileName.substring(0,20)+"...";
	 $("#uploaditembox").append("<li id='"+file.id+"'>"+
	 "	<div class='load_area'>"+
		 "			<div class='fl file_ico'></div>"+
		 "			<div class='fl itembox'>"+
		 "				<div class='load_info'>"+
		 "					<span class='loading'>初始化中...</span>"+
		 "					<span class='loaded' style='display:none'><img src='js/upload/loading2.gif'/></span>"+
		 "					<span class='filename'>"+fileName+"</span>"+
		 "					<span class='filesize'>大小:"+tm_countFileSize(file.size)+"</span>"+
		 " 				</div>"+
		 "				<div class='uppbox'>"+
		 "					<div class='up-prograss' style='width: 0%'></div>"+
		 "				</div>"+
		 "			</div>"+
		 "			<a class='fr' href='javascript:void(0);' data-opid='"+file.id+"' onclick='tm_delete_file(this)'>删除</a>"+
	 "	</div>"+
	 "	</li>");
 }
 
 //删除文件
 function tm_delete_file(obj){
	 var opid = $(obj).data("opid"); 
	 upload.cancelUpload(opid);
	 upload.startUpload($(obj).parents("li").next().attr("id"));
	 $(obj).parents("li").fadeOut("slow",function(){
		 $(this).remove();
		 $("#aspupload").find(".bar_total").find(".number").text($("#uploaditembox").find("li").length);
		 tm_hide_upload();
	 });
 };
 
 function tm_hide_upload(){
	 var length = $("#uploaditembox").find("li").length;
	 if(length==0){
		 $("#aspupload").animate({"height":0},function(){
			$(this).remove();
		 });
	 }
 }
 
 //统计文件的大小
 function tm_countFileSize(size) {
	var fsize = parseFloat(size, 2);
	var fileSizeString;
	if (fsize < 1024) {
		fileSizeString = fsize.toFixed(2) + "B";
	} else if (fsize < 1048576) {
		fileSizeString = (fsize / 1024).toFixed(2) + "KB";
	} else if (fsize < 1073741824) {
		fileSizeString = (fsize / 1024 / 1024).toFixed(2) + "MB";
	} else if (fsize < 1024 * 1024 * 1024) {
		fileSizeString = (fsize / 1024 / 1024 / 1024).toFixed(2) + "GB";
	} else {
		fileSizeString = "0B";
	}
	return fileSizeString;
};

//文件开始上传异常捕获信息
function fileQueueError(file, errorCode, message) {
	tm_append_uploaditem(file);
	try {
		if (errorCode === SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED) {
			$filename.html("您已达到上传限制 您最多能选择 " + (message > 1 ? "上传 " + message + " 文件." : "一个文件."));
			return;
		}
		var $filename = $("#"+file.id).find(".filename");
		switch (errorCode) {
    		case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:
    			$filename.html("<span class='red'>文件尺寸过大," + file.name+"</span>");
    			break;
    		case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:
    			$filename.html("<span class='red'>零字节文件, 文件名: " + file.name+"</span>");
    			break;
    		case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:
    			$filename.html("<span class='red'>不支持的文件类型, 文件名: " + file.name+"</span>");
    			break;
    		default:
    			$filename.html("<span class='red'>未知错误</span>");
    			break;
    	}
		$("#"+file.id).fadeOut(8000,function(){$(this).remove(); $("#aspupload").find(".bar_total").find(".number").text($("#uploaditembox").find("li").length);});
	} catch (ex) {
        this.debug(ex);
    }
};

//出错信息
function uploadError(file, errorCode, message) {
	try {
		var $filename = $("#"+file.id).find(".filename");
		switch (errorCode) {
    		case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:
    			$filename.html("<span class='red'> HTTP错误, 文件名: " + file.name+"</span>");
    			break;
    		case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:
    			$filename.html("<span class='red'>上传失败</span>");
    			break;
    		case SWFUpload.UPLOAD_ERROR.IO_ERROR:
    			$filename.html("<span class='red'>服务器 (IO) 错误</span>");
    			break;
    		case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:
    			$filename.html("<span class='red'>安全错误</span>");
    			break;
    		case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:
    			$filename.html("<span class='red'>超出上传限制.</span>");
    			break;
    		case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:
    			$filename.html("<span class='red'>无法验证.  跳过上传.</span>");
    			break;
    		case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:
    			$filename.html("<span class='red'>取消</span>");
    			break;
    		case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:
    			$filename.html("<span class='red'>停止</span>");
    			break;
    		default:
    			$filename.html("<span class='red'>未处理的错误: " + errorCode+"</span>");
    			break;
		}
		$("#"+file.id).fadeOut(8000,function(){$(this).remove(); $("#aspupload").find(".bar_total").find(".number").text($("#uploaditembox").find("li").length);});
	} catch (ex) {
        this.debug(ex);
    }
}


//空判断
function isEmpty(val) {
	val = $.trim(val);
	if (val == null)
		return true;
	if (val == undefined || val == 'undefined')
		return true;
	if (val == "")
		return true;
	if (val.length == 0)
		return true;
	if (!/[^(^\s*)|(\s*$)]/.test(val))
		return true;
	return false;
}

 /*折叠上传框*/
 function tm_expand_upload(obj){
	if($(obj).hasClass("shrink")){
		$(obj).removeClass("shrink").addClass("enlarge");
		$("#mainloadarea").animate({"height":0});
	}else{
		$(obj).removeClass("enlarge").addClass("shrink");
		$("#mainloadarea").animate({"height":345});
	}
 }

//关闭上传框以关闭上传的队列
function tm_expand_close(obj){
	$("#mainloadarea").empty();
	$("#aspupload").animate({"height":0},function(){
		$(this).remove();
	});
	upload.cancelQueue();
}